{"version":3,"sources":["utils/fetchClient.ts","api/comments.ts","components/UserContext/UserContext.tsx","api/users.ts","api/posts.ts","components/UserSelector.tsx","components/Loader/Loader.tsx","components/PostsList.tsx","components/NewCommentForm.tsx","components/PostDetails.tsx","App.tsx","index.tsx"],"names":["BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","body","JSON","stringify","headers","then","fetch","response","json","client","getComments","postData","id","UserContext","React","createContext","ErrorContext","UserIdContext","PostsContext","CommentsContext","PostDataContext","UserProvider","children","useState","users","setUsers","isLoading","setIsloading","isLoadingPosts","setIsLoaidingPosts","isError","setIsError","userId","setUserId","posts","setPosts","comments","setComments","setPostData","loadUsersFromServer","a","getUsersFromServer","loadPostsFromServer","user","getPostsFromServer","loadCommentsFromServer","getCommentsFromServer","loadComments","useCallback","useEffect","Provider","value","handleUserSelect","handlePost","postDetails","newCommentSelect","newComment","prevComments","UserSelector","useContext","isOpen","setIsOpen","userIdContext","handleMenu","prev","className","type","onClick","name","role","map","href","Loader","PostsList","post","title","classNames","NewCommentForm","submitting","setSubmitting","error","onAddComment","email","postId","hasNameError","setHasNameError","hasEmailError","setHasEmailError","emailValidationError","setEmailValidationError","hasBodyError","setHasBodyError","setValues","handleSubmit","event","preventDefault","test","trim","length","current","onSubmit","onReset","htmlFor","placeholder","onChange","target","onFocus","PostDetails","commentsData","click","setClick","comment","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.39562c3a.chunk.js","sourcesContent":["const BASE_URL = 'https://mate.academy/students-api';\n\n// a promise resolved after a given delay\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\n// To have autocompletion and avoid mistypes\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: any = null, // we can send any data to the server\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    // We add body and Content-Type only for the requests with data\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  // for a demo purpose we emulate a delay to see if Loaders work\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => response.json());\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: any) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import { Comment } from '../types/Comment';\nimport { Post } from '../types/Post';\nimport { client } from '../utils/fetchClient';\n\nexport const getComments = (postData: Post | null) => {\n  return client.get<Comment[]>(`/comments?postId=${postData?.id}`);\n};\n\nexport const createComment = (comment: Partial<Comment>) => {\n  return client.post<Comment>('/comments', comment);\n};\n\nexport const deleteComment = (commentId: number | undefined) => {\n  return client.delete(`/comments/${commentId}`);\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { User } from '../../types/User';\nimport { getUsers } from '../../api/users';\nimport { getPosts } from '../../api/posts';\nimport { Post } from '../../types/Post';\nimport { Comment } from '../../types/Comment';\nimport { getComments } from '../../api/comments';\n\ntype ErrorContextType = {\n  isLoading: boolean,\n  isError: boolean,\n  isLoadingPosts: boolean,\n};\n\ntype UserIdType = {\n  userId: User | null,\n  handleUserSelect: (id: User) => void,\n};\n\n// type NewCommentType = {\n//   postId: number;\n//   name: string;\n//   email: string;\n//   body: string;\n// };\n\ntype ComentsDataType = {\n  comments: Comment[],\n  newCommentSelect: (newComment: Comment) => void\n};\n\ntype PostDataType = {\n  postData: Post | null,\n  handlePost: (postDetails: Post) => void\n};\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const UserContext = React.createContext<User[] | null>(null);\nexport const ErrorContext\n  = React.createContext<ErrorContextType>({} as ErrorContextType);\nexport const UserIdContext = React.createContext<UserIdType>({} as UserIdType);\nexport const PostsContext\n  = React.createContext<Post[]>([]);\nexport const CommentsContext\n= React.createContext<ComentsDataType>({} as ComentsDataType);\nexport const PostDataContext\n  = React.createContext<PostDataType>({} as PostDataType);\n\nexport const UserProvider: React.FC<Props> = ({ children }) => {\n  const [users, setUsers] = useState<User[] | null>(null);\n  const [isLoading, setIsloading] = useState(false);\n  const [isLoadingPosts, setIsLoaidingPosts] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [userId, setUserId] = useState<User | null>(null);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [postData, setPostData] = useState<Post | null>(null);\n\n  const handleUserSelect = (id: User) => {\n    setUserId(id);\n\n    setPostData(null);\n  };\n\n  const newCommentSelect = (newComment: Comment) => {\n    setComments(prevComments => [...prevComments, newComment]);\n  };\n\n  const handlePost = (postDetails: Post) => {\n    if (postData?.id === postDetails.id) {\n      setPostData(null);\n    } else {\n      setPostData(postDetails);\n    }\n  };\n\n  const loadUsersFromServer = async () => {\n    try {\n      const getUsersFromServer = await getUsers();\n\n      setUsers(getUsersFromServer);\n    } catch (error) {\n      setIsError(true);\n    }\n  };\n\n  const loadPostsFromServer = async () => {\n    try {\n      setIsLoaidingPosts(true);\n      const getPostsFromServer = await getPosts(userId);\n\n      setPosts(getPostsFromServer);\n    } catch (error) {\n      setIsError(true);\n      setIsLoaidingPosts(false);\n    } finally {\n      setIsLoaidingPosts(false);\n      setIsError(false);\n    }\n  };\n\n  const loadCommentsFromServer = async () => {\n    try {\n      setIsloading(true);\n      const getCommentsFromServer = await getComments(postData);\n\n      setComments(getCommentsFromServer);\n    } catch (error) {\n      setIsError(true);\n      setIsloading(false);\n    } finally {\n      setIsloading(false);\n      setIsError(false);\n    }\n  };\n\n  const loadComments = useCallback(() => {\n    loadCommentsFromServer();\n  }, [postData]);\n\n  useEffect(() => {\n    loadUsersFromServer();\n  }, []);\n\n  useEffect(() => {\n    if (userId) {\n      loadPostsFromServer();\n    }\n  }, [userId]);\n\n  useEffect(() => {\n    if (postData) {\n      loadComments();\n    }\n  }, [postData]);\n\n  return (\n    <UserContext.Provider value={users}>\n      <ErrorContext.Provider value={{ isLoading, isError, isLoadingPosts }}>\n        <UserIdContext.Provider value={{ userId, handleUserSelect }}>\n          <PostsContext.Provider value={posts}>\n            <PostDataContext.Provider value={{ postData, handlePost }}>\n              <CommentsContext.Provider value={{ comments, newCommentSelect }}>\n                {children}\n              </CommentsContext.Provider>\n            </PostDataContext.Provider>\n          </PostsContext.Provider>\n        </UserIdContext.Provider>\n      </ErrorContext.Provider>\n    </UserContext.Provider>\n  );\n};\n","import { User } from '../types/User';\nimport { client } from '../utils/fetchClient';\n\nexport const getUsers = () => {\n  return client.get<User[]>('/users');\n};\n","import { Post } from '../types/Post';\nimport { User } from '../types/User';\nimport { client } from '../utils/fetchClient';\n\nexport const getPosts = (user: User | null) => {\n  return client.get<Post[]>(`/posts?userId=${user?.id}`);\n};\n","import React, { useContext, useState } from 'react';\nimport { UserContext, UserIdContext } from './UserContext/UserContext';\nimport { User } from '../types/User';\n\nexport const UserSelector: React.FC = () => {\n  const users = useContext(UserContext);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const userIdContext = useContext(UserIdContext);\n\n  const handleMenu = () => {\n    setIsOpen(prev => !prev);\n  };\n\n  const handleUserId\n    = (userId: User) => {\n      userIdContext.handleUserSelect(userId);\n      handleMenu();\n    };\n\n  return (\n    <div\n      data-cy=\"UserSelector\"\n      className=\"dropdown is-active\"\n    >\n      <div className=\"dropdown-trigger\">\n        <button\n          type=\"button\"\n          className=\"button\"\n          aria-haspopup=\"true\"\n          aria-controls=\"dropdown-menu\"\n          onClick={handleMenu}\n        >\n          {userIdContext.userId ? (\n            <span>{userIdContext.userId.name}</span>\n          ) : (\n            <span>Choose a user</span>\n          )}\n\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-angle-down\" aria-hidden=\"true\" />\n          </span>\n        </button>\n      </div>\n\n      {isOpen && (\n        <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n          <div className=\"dropdown-content\">\n            {(users?.map(user => (\n              <a\n                href={`#user-${user.id}`}\n                className=\"dropdown-item\"\n                key={user.id}\n                onClick={() => handleUserId(user)}\n              >\n                {user.name}\n              </a>\n            )))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","import './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\" data-cy=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport { PostDataContext, PostsContext } from './UserContext/UserContext';\n\nexport const PostsList: React.FC = () => {\n  const posts = useContext(PostsContext);\n  const postDetails = useContext(PostDataContext);\n\n  return (\n    <div data-cy=\"PostsList\">\n      <p className=\"title\">Posts:</p>\n\n      <table className=\"table is-fullwidth is-striped is-hoverable is-narrow\">\n        <thead>\n          <tr className=\"has-background-link-light\">\n            <th>#</th>\n            <th>Title</th>\n            <th> </th>\n          </tr>\n        </thead>\n        <tbody>\n          {posts?.map(post => (\n            <tr data-cy=\"Post\" key={post.id}>\n              <td data-cy=\"PostId\">{post.id}</td>\n\n              <td data-cy=\"PostTitle\">\n                {post.title}\n              </td>\n\n              <td className=\"has-text-right is-vcentered\">\n                <button\n                  type=\"button\"\n                  data-cy=\"PostButton\"\n                  className={classNames(\n                    'button',\n                    'is-link',\n                    { 'is-light': postDetails.postData?.id !== post.id },\n                  )}\n                  onClick={() => postDetails.handlePost(post)}\n                >\n                  {postDetails.postData?.id === post.id ? 'Close' : 'Open'}\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useContext, useState } from 'react';\nimport classNames from 'classnames';\nimport { CommentData } from '../types/Comment';\nimport {\n  // CommentsContext,\n  ErrorContext,\n  PostDataContext,\n} from './UserContext/UserContext';\nimport { createComment } from '../api/comments';\n\nexport const NewCommentForm: React.FC = () => {\n  const [submitting, setSubmitting] = useState(false);\n  // const [validEmail, setValidEmail] = useState<string | null>(null);\n\n  const postDetails = useContext(PostDataContext);\n  // const commentsData = useContext(CommentsContext);\n\n  const error = useContext(ErrorContext);\n\n  const onAddComment = async ({ name, email, body }: CommentData) => {\n    const newComment = {\n      name,\n      email,\n      body,\n      postId: postDetails.postData?.id,\n    };\n\n    createComment(newComment);\n  };\n\n  const [hasNameError, setHasNameError] = useState(false);\n  const [hasEmailError, setHasEmailError] = useState(false);\n  const [emailValidationError, setEmailValidationError] = useState(false);\n  const [hasBodyError, setHasBodyError] = useState(false);\n\n  const [{ name, email, body }, setValues] = useState({\n    name: '',\n    email: '',\n    body: '',\n  });\n  const handleChangeName = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    setValues(current => ({ ...current, name: event.target.value }));\n  };\n\n  const handleChangeEmail = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    setValues(current => ({ ...current, email: event.target.value }));\n  };\n\n  const handleChangeBody = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    setValues(current => ({ ...current, body: event.target.value }));\n  };\n\n  const validateEmail = (em: string) => {\n    const emailRegex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n\n    return emailRegex.test(em);\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (!validateEmail(email)) {\n      setEmailValidationError(true);\n    }\n\n    if (!email.trim().length) {\n      setHasEmailError(true);\n    }\n\n    if (!name.trim().length) {\n      setHasNameError(true);\n    }\n\n    if (!body.length) {\n      setHasBodyError(true);\n    }\n\n    if (hasBodyError || hasEmailError || hasNameError\n      || emailValidationError) {\n      return;\n    }\n\n    setSubmitting(true);\n\n    await onAddComment({ name, email, body });\n\n    // const newComment = {\n    //   name,\n    //   email,\n    //   body,\n    //   postId: postDetails.postData.id,\n    // };\n\n    // commentsData.newCommentSelect(newComment);\n\n    setSubmitting(false);\n    setValues(current => ({ ...current, body: '' }));\n  };\n\n  const clearForm = () => {\n    setValues({\n      name: '',\n      email: '',\n      body: '',\n    });\n\n    setHasNameError(false);\n    setHasEmailError(false);\n    setEmailValidationError(false);\n    setHasBodyError(false);\n  };\n\n  const focusErrorDisabled = () => {\n    setEmailValidationError(false);\n    setHasEmailError(false);\n  };\n\n  return (\n    <>\n      <form\n        data-cy=\"NewCommentForm\"\n        onSubmit={handleSubmit}\n        onReset={clearForm}\n      >\n        <div className=\"field\" data-cy=\"NameField\">\n          <label className=\"label\" htmlFor=\"comment-author-name\">\n            Author Name\n          </label>\n\n          <div className=\"control has-icons-left has-icons-right\">\n            <input\n              type=\"text\"\n              name=\"name\"\n              id=\"comment-author-name\"\n              placeholder=\"Name Surname\"\n              className={classNames('input', { 'is-danger': hasNameError })}\n              value={name}\n              onChange={handleChangeName}\n              onFocus={() => setHasNameError(false)}\n            />\n\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-user\" />\n            </span>\n\n            {hasNameError && (\n              <span\n                className=\"icon is-small is-right has-text-danger\"\n                data-cy=\"ErrorIcon\"\n              >\n                <i className=\"fas fa-exclamation-triangle\" />\n              </span>\n            )}\n\n          </div>\n\n          {hasNameError && (\n            <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n              Name is required\n            </p>\n          )}\n\n        </div>\n\n        <div className=\"field\" data-cy=\"EmailField\">\n          <label className=\"label\" htmlFor=\"comment-author-email\">\n            Author Email\n          </label>\n\n          <div className=\"control has-icons-left has-icons-right\">\n            <input\n              type=\"text\"\n              name=\"email\"\n              id=\"comment-author-email\"\n              placeholder=\"email@test.com\"\n              className={classNames('input',\n                { 'is-danger': hasEmailError })}\n              value={email}\n              onChange={handleChangeEmail}\n              onFocus={() => focusErrorDisabled()}\n            />\n\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-envelope\" />\n            </span>\n\n            {(hasEmailError || emailValidationError) && (\n              <span\n                className=\"icon is-small is-right has-text-danger\"\n                data-cy=\"ErrorIcon\"\n              >\n                <i className=\"fas fa-exclamation-triangle\" />\n              </span>\n            )}\n\n          </div>\n          {(hasEmailError) && (\n            <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n              Email is required\n            </p>\n          )}\n          {emailValidationError && (\n            <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n              Invalid email address\n            </p>\n          )}\n\n        </div>\n\n        <div className=\"field\" data-cy=\"BodyField\">\n          <label className=\"label\" htmlFor=\"comment-body\">\n            Comment Text\n          </label>\n\n          <div className=\"control\">\n            <textarea\n              id=\"comment-body\"\n              name=\"body\"\n              placeholder=\"Type comment here\"\n              className={classNames('textarea',\n                { 'is-danger': hasBodyError })}\n              value={body}\n              onChange={handleChangeBody}\n              onFocus={() => setHasBodyError(false)}\n            />\n          </div>\n\n          {hasBodyError && (\n            <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n              Enter some text\n            </p>\n          )}\n\n        </div>\n\n        <div className=\"field is-grouped\">\n          <div className=\"control\">\n            <button\n              type=\"submit\"\n              className={classNames('button', 'is-link', {\n                'is-loading': submitting,\n              })}\n            >\n              Add\n            </button>\n          </div>\n\n          <div className=\"control\">\n            {/* eslint-disable-next-line react/button-has-type */}\n            <button type=\"reset\" className=\"button is-link is-light\">\n              Clear\n            </button>\n          </div>\n        </div>\n      </form>\n      {error.isError && (\n        <div className=\"notification is-danger is-light has-text-weight-normal\">\n          Unable to add a comment\n        </div>\n      )}\n    </>\n  );\n};\n","import React, { useContext, useState } from 'react';\nimport { Loader } from './Loader';\nimport { NewCommentForm } from './NewCommentForm';\nimport {\n  CommentsContext,\n  ErrorContext,\n  PostDataContext,\n} from './UserContext/UserContext';\n\nexport const PostDetails: React.FC = () => {\n  const postDetails = useContext(PostDataContext);\n  const { isLoading } = useContext(ErrorContext);\n  const { isError } = useContext(ErrorContext);\n  const commentsData = useContext(CommentsContext);\n  const [click, setClick] = useState(false);\n\n  return (\n    <div className=\"content\" data-cy=\"PostDetails\">\n      <div className=\"content\" data-cy=\"PostDetails\">\n        <div className=\"block\">\n          <h2 data-cy=\"PostTitle\">\n            {`#${postDetails.postData?.id}: ${postDetails.postData?.title}`}\n          </h2>\n\n          <p data-cy=\"PostBody\">\n            {postDetails.postData?.body}\n          </p>\n        </div>\n\n        <div className=\"block\">\n          {isLoading && <Loader />}\n\n          {isError && (\n            <div className=\"notification is-danger\" data-cy=\"CommentsError\">\n              Something went wrong\n            </div>\n          )}\n\n          {commentsData.comments.length === 0 && (\n            <p className=\"title is-4\" data-cy=\"NoCommentsMessage\">\n              No comments yet\n            </p>\n          )}\n\n          <p className=\"title is-4\">Comments:</p>\n\n          {commentsData.comments.map(comment => (\n            <article\n              className=\"message is-small\"\n              data-cy=\"Comment\"\n              key={comment.id}\n            >\n              <div className=\"message-header\">\n                <a href={comment.email} data-cy=\"CommentAuthor\">\n                  {comment.name}\n                </a>\n                <button\n                  data-cy=\"CommentDelete\"\n                  type=\"button\"\n                  className=\"delete is-small\"\n                  aria-label=\"delete\"\n                >\n                  delete button\n                </button>\n              </div>\n\n              <div className=\"message-body\" data-cy=\"CommentBody\">\n                {comment.body}\n              </div>\n            </article>\n          ))}\n\n          <button\n            data-cy=\"WriteCommentButton\"\n            type=\"button\"\n            className=\"button is-link\"\n            onClick={() => setClick(true)}\n          >\n            Write a comment\n          </button>\n        </div>\n\n        {click && <NewCommentForm />}\n\n      </div>\n    </div>\n  );\n};\n","import React, { useContext } from 'react';\nimport 'bulma/bulma.sass';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport './App.scss';\nimport classNames from 'classnames';\nimport { UserSelector } from './components/UserSelector';\nimport {\n  ErrorContext,\n  PostDataContext,\n  PostsContext,\n  UserIdContext,\n} from './components/UserContext/UserContext';\nimport { Loader } from './components/Loader';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\n\nexport const App: React.FC = () => {\n  const { isLoadingPosts } = useContext(ErrorContext);\n  const { isError } = useContext(ErrorContext);\n  const { userId } = useContext(UserIdContext);\n  const posts = useContext(PostsContext);\n  const postDetails = useContext(PostDataContext);\n\n  return (\n    <main className=\"section\">\n      <div className=\"container\">\n        <div className=\"tile is-ancestor\">\n          <div className=\"tile is-parent\">\n            <div className=\"tile is-child box is-success\">\n              <div className=\"block\">\n                <UserSelector />\n              </div>\n\n              <div className=\"block\" data-cy=\"MainContent\">\n                {!userId && (\n                  <p data-cy=\"NoSelectedUser\">\n                    No user selected\n                  </p>\n                )}\n                {isError && (\n                  <div\n                    className=\"notification is-danger\"\n                    data-cy=\"PostsLoadingError\"\n                  >\n                    Something went wrong!\n                  </div>\n                )}\n\n                {isLoadingPosts ? <Loader /> : (\n                  <>\n                    {(posts?.length > 0 && userId && !isError) && (\n                      <PostsList />\n                    )}\n\n                    {(posts?.length === 0 && userId && !isError) && (\n                      <div\n                        className=\"notification is-warning\"\n                        data-cy=\"NoPostsYet\"\n                      >\n                        No posts yet\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {postDetails.postData && (\n            <div\n              data-cy=\"Sidebar\"\n              className={classNames(\n                'tile',\n                'is-parent',\n                'is-8-desktop',\n                'Sidebar',\n                'Sidebar--open',\n              )}\n            >\n              <div className=\"tile is-child box is-success \">\n                <PostDetails />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </main>\n  );\n};\n","import ReactDOM from 'react-dom';\nimport { App } from './App';\nimport { UserProvider } from './components/UserContext/UserContext';\n\nReactDOM.render(\n  <UserProvider>\n    <App />\n  </UserProvider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}